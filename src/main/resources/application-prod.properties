# ------------------------------
# 1. Database (Neon DB)
# ------------------------------
spring.datasource.url=jdbc:postgresql://ep-gentle-dream-a4alm8bt-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require&channelBinding=require
spring.datasource.username=${NEON_USER}
spring.datasource.password=${NEON_PASSWORD}

# front-end url
application.frontend.url=https://streamforge-front.vercel.app/
# ------------------------------
# JPA / Hibernate Configuration
# ------------------------------
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
# (Optional: dialect is usually auto-detected, but safe to keep)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ------------------------------
# 2. Upload Config (Production)
# ------------------------------
# Ensure this directory exists or use a cloud storage service (S3) for true persistence
spring.servlet.multipart.location=/data/prod-uploads
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# ------------------------------
# 3. Security & JWT
# ------------------------------
application.security.jwt.secret-key=${JWT_SECRET_KEY}
application.security.jwt.expiration=${JWT_EXPIRATION}

# ------------------------------
# 4. Google OAuth
# ------------------------------
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=openid,profile,email

# CRITICAL: This allows Spring to calculate the correct {baseUrl} (HTTPS) behind Render's proxy
server.forward-headers-strategy=framework

# You can stick with the dynamic base URL now that headers are handled:
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/google

# ------------------------------
# 5. Logging Level
# ------------------------------
# Reduce noise in production
logging.level.root=WARN
logging.level.com.example.rest_service=INFO